1:"$Sreact.fragment"
2:I[59919,["/_next/static/chunks/58c2b1b1d516231a.js","/_next/static/chunks/c836aafec79742f5.js"],"ThemeProvider"]
3:I[45678,["/_next/static/chunks/58c2b1b1d516231a.js","/_next/static/chunks/c836aafec79742f5.js"],"default"]
4:I[39756,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/c81db6e24f0cfdeb.js"],"default"]
5:I[37457,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/c81db6e24f0cfdeb.js"],"default"]
6:I[29306,["/_next/static/chunks/58c2b1b1d516231a.js","/_next/static/chunks/c836aafec79742f5.js","/_next/static/chunks/e94577539defbe8e.js","/_next/static/chunks/81df9eb6eb572478.js"],"default"]
8:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/c81db6e24f0cfdeb.js"],"OutletBoundary"]
9:"$Sreact.suspense"
b:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/c81db6e24f0cfdeb.js"],"ViewportBoundary"]
d:I[97367,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/c81db6e24f0cfdeb.js"],"MetadataBoundary"]
f:I[68027,[],"default"]
:HL["/_next/static/chunks/1e325bcacc5ab67c.css","style"]
:HL["/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/chunks/6f04dbb31b3b2afc.css","style"]
0:{"P":null,"b":"13yVil37WRc6nYr5_mRly","c":["","blogs","c3d4e5f6-a7b8-9012-cdef-345678901234",""],"q":"","i":false,"f":[[["",{"children":["blogs",{"children":[["uuid","c3d4e5f6-a7b8-9012-cdef-345678901234","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],[["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/1e325bcacc5ab67c.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","script","script-0",{"src":"/_next/static/chunks/58c2b1b1d516231a.js","async":true,"nonce":"$undefined"}],["$","script","script-1",{"src":"/_next/static/chunks/c836aafec79742f5.js","async":true,"nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"scroll-smooth","suppressHydrationWarning":true,"children":["$","body",null,{"className":"inter_5901b7c6-module__ec5Qua__variable font-sans antialiased min-h-screen flex flex-col","children":["$","$L2",null,{"attribute":"class","defaultTheme":"system","enableSystem":true,"disableTransitionOnChange":true,"children":[["$","$L3",null,{}],["$","main",null,{"className":"flex-1 container mx-auto px-4 py-8","children":["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","$L6",null,{}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"border-t border-slate-200 dark:border-slate-800 py-6 text-center text-sm text-slate-500 dark:text-slate-400","children":["© ",2025," Mohammad Sadat Hossain. All rights reserved."]}]]}]}]}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":[null,["$","$L4",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["$","$1","c",{"children":["$L7",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/6f04dbb31b3b2afc.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","script","script-0",{"src":"/_next/static/chunks/7c7890717b80e2b2.js","async":true,"nonce":"$undefined"}]],["$","$L8",null,{"children":["$","$9",null,{"name":"Next.MetadataOutlet","children":"$@a"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],["$","$1","h",{"children":[null,["$","$Lb",null,{"children":"$@c"}],["$","div",null,{"hidden":true,"children":["$","$Ld",null,{"children":["$","$9",null,{"name":"Next.Metadata","children":"$@e"}]}]}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],false]],"m":"$undefined","G":["$f",[]],"S":true}
c:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
10:I[27201,["/_next/static/chunks/ff1a16fafef87110.js","/_next/static/chunks/c81db6e24f0cfdeb.js"],"IconMark"]
e:[["$","title","0",{"children":"Mohammad Sadat Hossain | Lecturer, CSE, BUET"}],["$","meta","1",{"name":"description","content":"Lecturer at CSE, BUET | AI & Bioinformatics Researcher | My research interests lie in computational biology, AI for health, and human-computer interaction."}],["$","link","2",{"rel":"icon","href":"/icon.ico","sizes":"32x32"}],["$","link","3",{"rel":"icon","href":"/logo.png","sizes":"1024x1024","type":"image/png"}],["$","link","4",{"rel":"apple-touch-icon","href":"/logo.png"}],["$","$L10","5",{}]]
a:null
11:I[22016,["/_next/static/chunks/58c2b1b1d516231a.js","/_next/static/chunks/c836aafec79742f5.js","/_next/static/chunks/7c7890717b80e2b2.js"],""]
:HL["/banners/ios-audio-safari.png","image"]
7:["$","div",null,{"className":"max-w-4xl mx-auto space-y-8","children":[["$","$L11",null,{"href":"/blogs","className":"inline-flex items-center gap-2 text-sm text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-50 transition-colors","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":16,"height":16,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-arrow-left","aria-hidden":"true","children":[["$","path","1l729n",{"d":"m12 19-7-7 7-7"}],["$","path","x3x0zl",{"d":"M19 12H5"}],"$undefined"]}],"Back to Blogs"]}],["$","div",null,{"className":"relative w-full aspect-video md:aspect-[2/1] rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm","children":["$","img",null,{"src":"/banners/ios-audio-safari.png","alt":"Why Your Audio Won't Play on iOS Safari (And How to Fix It)","className":"w-full h-full object-cover"}]}],["$","header",null,{"className":"space-y-4 border-b border-slate-200 dark:border-slate-800 pb-8","children":[["$","div",null,{"className":"flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400","children":[["$","div",null,{"className":"flex items-center gap-2","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":16,"height":16,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-calendar","aria-hidden":"true","children":[["$","path","1cmpym",{"d":"M8 2v4"}],["$","path","4m81vk",{"d":"M16 2v4"}],["$","rect","1hopcy",{"width":"18","height":"18","x":"3","y":"4","rx":"2"}],["$","path","8toen8",{"d":"M3 10h18"}],"$undefined"]}],["$","span",null,{"children":"December 14, 2025"}]]}],["$","span",null,{"className":"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs font-medium","children":"Tutorial"}]]}],["$","h1",null,{"className":"text-3xl md:text-4xl font-bold text-slate-900 dark:text-slate-50 leading-tight","children":"Why Your Audio Won't Play on iOS Safari (And How to Fix It)"}],["$","div",null,{"className":"flex flex-wrap gap-2","children":[["$","span","iOS",{"className":"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":12,"height":12,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag","aria-hidden":"true","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"iOS"]}],["$","span","Safari",{"className":"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":12,"height":12,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag","aria-hidden":"true","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Safari"]}],["$","span","Audio",{"className":"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":12,"height":12,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag","aria-hidden":"true","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],"$L12","$undefined"]}],"Audio"]}],"$L13","$L14","$L15"]}]]}],"$L16"]}]
17:I[12740,["/_next/static/chunks/58c2b1b1d516231a.js","/_next/static/chunks/c836aafec79742f5.js","/_next/static/chunks/7c7890717b80e2b2.js"],"default"]
12:["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}]
13:["$","span","Web Development",{"className":"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":12,"height":12,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag","aria-hidden":"true","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Web Development"]}]
14:["$","span","Cross-Browser",{"className":"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":12,"height":12,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag","aria-hidden":"true","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Cross-Browser"]}]
15:["$","span","Debugging",{"className":"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full","children":[["$","svg",null,{"ref":"$undefined","xmlns":"http://www.w3.org/2000/svg","width":12,"height":12,"viewBox":"0 0 24 24","fill":"none","stroke":"currentColor","strokeWidth":2,"strokeLinecap":"round","strokeLinejoin":"round","className":"lucide lucide-tag","aria-hidden":"true","children":[["$","path","vktsd0",{"d":"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["$","circle","kqv944",{"cx":"7.5","cy":"7.5","r":".5","fill":"currentColor"}],"$undefined"]}],"Debugging"]}]
18:T1f67,# Why Your Audio Won't Play on iOS Safari (And How to Fix It)

_A deep dive into cross-browser audio compatibility issues and the solutions that actually work._

---

If you've ever built a web application that records and plays back audio, you've probably encountered the dreaded scenario: everything works perfectly on Chrome, Firefox, and Android—but the moment someone opens your app on an iPhone or Mac Safari, the audio simply refuses to play. You see an error, or worse, nothing at all.

After hours of debugging a production issue affecting all iOS/Safari users, I want to share what I learned about this surprisingly complex problem.

## The Symptoms

The issue typically manifests as:

- Audio player shows "Audio could not be loaded"
- The `<audio>` element fires an `error` event
- `MediaError.code` is `4` (MEDIA_ERR_SRC_NOT_SUPPORTED)
- Backend logs show the file was successfully served (HTTP 200)
- The exact same audio plays fine on Chrome/Firefox

## The Three-Headed Problem

What makes this particularly tricky is that there are actually **three distinct issues** that can cause this, and you might be dealing with any combination of them:

### 1. Codec Incompatibility

Safari does not support the **WebM** container format or the **Opus** audio codec. When you use the MediaRecorder API without specifying a MIME type:

```javascript
// This creates WebM/Opus on Chrome, but MP4/AAC on Safari
const mediaRecorder = new MediaRecorder(stream);
```

If a user records audio on Chrome (WebM) and another user tries to play it on Safari, it will fail.

**The Fix:** Always specify a cross-browser compatible format:

```javascript
function getCompatibleMimeType() {
  const types = [
    "audio/mp4",
    "audio/aac",
    "audio/webm;codecs=opus",
    "audio/webm",
  ];

  for (const type of types) {
    if (MediaRecorder.isTypeSupported(type)) {
      return type;
    }
  }
  return ""; // Let browser decide
}

const mimeType = getCompatibleMimeType();
const mediaRecorder = new MediaRecorder(stream, { mimeType });
```

Safari will prefer `audio/mp4` (AAC codec), which is universally playable.

### 2. Missing or Incorrect Headers

Safari's `<audio>` element is extremely picky about HTTP headers. If your backend serves audio through an API endpoint (e.g., for authentication or decryption), you MUST include these headers:

```python
# Python/FastAPI example
from fastapi.responses import Response

@app.get("/api/audio/{file_id}")
async def get_audio(file_id: str):
    audio_content = load_audio(file_id)

    return Response(
        content=audio_content,
        media_type="audio/mp4",  # Correct MIME type!
        headers={
            "Content-Length": str(len(audio_content)),  # REQUIRED for Safari
            "Accept-Ranges": "bytes",  # Enables seeking
            "Content-Disposition": "inline",  # Not "attachment"!
        }
    )
```

Critical points:

- **Content-Length is mandatory** - Safari won't play audio without it
- **Don't use StreamingResponse** - Safari needs the full content length upfront
- **Support Range requests** - Safari uses these for seeking

For range requests (Safari sends these when seeking):

```python
@app.get("/api/audio/{file_id}")
async def get_audio(file_id: str, request: Request):
    audio_content = load_audio(file_id)
    content_length = len(audio_content)

    range_header = request.headers.get("range")

    if range_header:
        # Parse "bytes=0-1023" format
        start, end = parse_range_header(range_header, content_length)

        return Response(
            content=audio_content[start:end+1],
            status_code=206,  # Partial Content
            media_type="audio/mp4",
            headers={
                "Content-Length": str(end - start + 1),
                "Content-Range": f"bytes {start}-{end}/{content_length}",
                "Accept-Ranges": "bytes",
            }
        )

    # Full content
    return Response(
        content=audio_content,
        media_type="audio/mp4",
        headers={
            "Content-Length": str(content_length),
            "Accept-Ranges": "bytes",
        }
    )
```

### 3. The `<audio>` Element Just Won't Cooperate

Even with correct codecs and headers, Safari's `<audio>` element can still fail when loading audio from an API endpoint. This is because Safari handles audio loading differently from other browsers.

**The Nuclear Option: Blob URLs**

The most reliable solution is to bypass the `<audio>` element's built-in loading entirely:

```javascript
async function loadAudioForSafari(audioElement, url) {
  // Detect Safari
  const isSafari =
    /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);

  if (isSafari) {
    // Fetch the audio as a blob
    const response = await fetch(url, {
      credentials: "include", // Include auth cookies
    });

    if (!response.ok) {
      throw new Error(`Failed to fetch: ${response.status}`);
    }

    const blob = await response.blob();
    const blobUrl = URL.createObjectURL(blob);

    audioElement.src = blobUrl;

    // Store for cleanup
    audioElement._blobUrl = blobUrl;
  } else {
    // Other browsers work fine with direct URL
    audioElement.src = url;
  }
}

// Clean up when done
function cleanupAudio(audioElement) {
  if (audioElement._blobUrl) {
    URL.revokeObjectURL(audioElement._blobUrl);
  }
}
```

This approach:

1. Uses `fetch` which handles authentication properly
2. Creates a local Blob URL that Safari can definitely play
3. Avoids Safari's quirky streaming behavior entirely

## Detecting the Audio Format

If you're serving encrypted or processed audio files, you might lose the original MIME type. Detect it from the file's magic bytes:

```python
def detect_audio_type(content: bytes) -> str:
    if len(content) < 12:
        return "application/octet-stream"

    # WebM: starts with 0x1A 0x45 0xDF 0xA3
    if content[:4] == b'\x1a\x45\xdf\xa3':
        return "audio/webm"

    # MP4/M4A: has 'ftyp' at offset 4
    if content[4:8] == b'ftyp':
        return "audio/mp4"

    # WAV: starts with 'RIFF' ... 'WAVE'
    if content[:4] == b'RIFF' and content[8:12] == b'WAVE':
        return "audio/wav"

    # MP3: ID3 tag or frame sync
    if content[:3] == b'ID3' or (content[0] == 0xff and (content[1] & 0xe0) == 0xe0):
        return "audio/mpeg"

    return "application/octet-stream"
```

## The Complete Solution

For bulletproof cross-browser audio:

1. **Record in compatible format** - Use `audio/mp4` when available
2. **Serve with correct headers** - Content-Length, Accept-Ranges, proper MIME type
3. **Support Range requests** - Return 206 with Content-Range
4. **Use Blob URLs for Safari** - Fetch → Blob → ObjectURL

## Debugging Tips

When things go wrong, log these from the audio element:

```javascript
audioElement.addEventListener("error", () => {
  const error = audioElement.error;
  console.log({
    errorCode: error?.code,
    // 1: ABORTED, 2: NETWORK, 3: DECODE, 4: SRC_NOT_SUPPORTED
    readyState: audioElement.readyState,
    // 0: NOTHING, 1: METADATA, 2: CURRENT_DATA, 3: FUTURE_DATA, 4: ENOUGH_DATA
    networkState: audioElement.networkState,
    // 0: EMPTY, 1: IDLE, 2: LOADING, 3: NO_SOURCE
    currentSrc: audioElement.currentSrc,
  });
});
```

If you see:

- `errorCode: 4` + `networkState: 3` → The audio never loaded (header/CORS issue)
- `errorCode: 3` → Decoding failed (codec issue)
- `errorCode: 4` + `readyState: 0` → Safari being Safari (use Blob approach)

## Conclusion

Safari audio issues are frustrating because they require solving multiple problems at once. The codec, headers, and loading mechanism all need to work together. The Blob URL approach is the most reliable solution when you control the client code, while proper header support is essential for any media-serving backend.

Remember: always test on actual iOS devices. The iOS Simulator can behave differently from real hardware.

---

_Have you encountered other Safari audio quirks? Share your war stories in the comments._
16:["$","$L17",null,{"content":"$18"}]
