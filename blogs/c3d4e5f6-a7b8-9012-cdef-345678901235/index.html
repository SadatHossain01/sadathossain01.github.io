<!DOCTYPE html><!--HvBExidyrcfczWy1wVCOr--><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/banners/ios-audio-safari.png" as="image"/><link rel="stylesheet" href="/_next/static/chunks/1e325bcacc5ab67c.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/6f04dbb31b3b2afc.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/c3f9506b72c1348b.js"/><script src="/_next/static/chunks/248cba0fcb3874ed.js" async=""></script><script src="/_next/static/chunks/3fa7363dafae8f47.js" async=""></script><script src="/_next/static/chunks/c6ad06f0e3276a98.js" async=""></script><script src="/_next/static/chunks/95b6200e0bdb07a0.js" async=""></script><script src="/_next/static/chunks/turbopack-148cac1d276dd1f8.js" async=""></script><script src="/_next/static/chunks/58c2b1b1d516231a.js" async=""></script><script src="/_next/static/chunks/c836aafec79742f5.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/c81db6e24f0cfdeb.js" async=""></script><script src="/_next/static/chunks/e94577539defbe8e.js" async=""></script><script src="/_next/static/chunks/81df9eb6eb572478.js" async=""></script><script src="/_next/static/chunks/7c7890717b80e2b2.js" async=""></script><meta name="next-size-adjust" content=""/><title>Mohammad Sadat Hossain | Lecturer, CSE, BUET</title><meta name="description" content="Lecturer at CSE, BUET | AI &amp; Bioinformatics Researcher | My research interests lie in computational biology, AI for health, and human-computer interaction."/><link rel="icon" href="/icon.ico" sizes="32x32"/><link rel="icon" href="/logo.png" sizes="1024x1024" type="image/png"/><link rel="apple-touch-icon" href="/logo.png"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="inter_5901b7c6-module__ec5Qua__variable font-sans antialiased min-h-screen flex flex-col"><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","system",null,["light","dark"],null,true,true)</script><nav class="sticky top-0 z-50 w-full border-b border-slate-200 bg-white/80 backdrop-blur-md dark:border-slate-800 dark:bg-slate-950/80"><div class="container mx-auto flex h-16 items-center justify-between px-4"><a class="flex items-center gap-2 text-lg font-bold tracking-tight text-slate-900 dark:text-slate-50" href="/"><img alt="Logo" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" class="rounded-md" style="color:transparent" src="/logo.png"/>Sadat Hossain</a><div class="hidden md:flex md:items-center md:gap-1"><a class="relative px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-50 hover:bg-slate-50 dark:hover:bg-slate-800/50" href="/">Home</a><a class="relative px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-50 hover:bg-slate-50 dark:hover:bg-slate-800/50" href="/education/">Education</a><a class="relative px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-50 hover:bg-slate-50 dark:hover:bg-slate-800/50" href="/projects/">Projects</a><a class="relative px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-50 hover:bg-slate-50 dark:hover:bg-slate-800/50" href="/experience/">Experience</a><a class="relative px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-50 hover:bg-slate-50 dark:hover:bg-slate-800/50" href="/teaching/">Teaching</a><a class="relative px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg text-slate-900 dark:text-slate-50 bg-slate-100 dark:bg-slate-800" href="/blogs/">Blogs<span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-1/2 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"></span></a><a target="_blank" class="relative px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-50 hover:bg-slate-50 dark:hover:bg-slate-800/50" href="/pdf/sadat_resume.pdf">Resume</a><button class="p-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-50 transition-colors" aria-label="Toggle theme"><div class="w-5 h-5"></div></button></div><div class="flex items-center gap-2 md:hidden"><button class="p-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-50 transition-colors" aria-label="Toggle theme"><div class="w-5 h-5"></div></button><button class="p-2 text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-50"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu" aria-hidden="true"><path d="M4 5h16"></path><path d="M4 12h16"></path><path d="M4 19h16"></path></svg></button></div></div></nav><main class="flex-1 container mx-auto px-4 py-8"><div class="max-w-4xl mx-auto space-y-8"><a class="inline-flex items-center gap-2 text-sm text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-50 transition-colors" href="/blogs/"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>Back to Blogs</a><div class="relative w-full aspect-video md:aspect-[2/1] rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm"><img src="/banners/ios-audio-safari.png" alt="Why Your Audio Won&#x27;t Play on iOS Safari (And How to Fix It)" class="w-full h-full object-cover"/></div><header class="space-y-4 border-b border-slate-200 dark:border-slate-800 pb-8"><div class="flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar" aria-hidden="true"><path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path></svg><span>December 14, 2025</span></div><span class="px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs font-medium">Tutorial</span></div><h1 class="text-3xl md:text-4xl font-bold text-slate-900 dark:text-slate-50 leading-tight">Why Your Audio Won&#x27;t Play on iOS Safari (And How to Fix It)</h1><div class="flex flex-wrap gap-2"><span class="flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag" aria-hidden="true"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>iOS</span><span class="flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag" aria-hidden="true"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Safari</span><span class="flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag" aria-hidden="true"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Audio</span><span class="flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag" aria-hidden="true"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Web Development</span><span class="flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag" aria-hidden="true"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Cross-Browser</span><span class="flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-tag" aria-hidden="true"><path d="M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"></path><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"></circle></svg>Debugging</span></div></header><div class="prose prose-slate dark:prose-invert max-w-none prose-headings:scroll-mt-20 prose-a:text-blue-600 dark:prose-a:text-blue-400 hover:prose-a:underline prose-img:rounded-xl prose-pre:p-0 prose-pre:bg-transparent prose-pre:m-0"><p>If you&#x27;ve ever built a web application that records and plays back audio, you&#x27;ve probably encountered the dreaded scenario: everything works perfectly on Chrome, Firefox, and Androidâ€”but the moment someone opens your app on an iPhone or Mac Safari, the audio simply refuses to play. You see an error, or worse, nothing at all.</p>
<p>After hours of debugging a production issue affecting all iOS/Safari users, I want to share what I learned about this surprisingly complex problem.</p>
<h2>The Symptoms</h2>
<p>The issue typically manifests as:</p>
<ul>
<li>Audio player shows &quot;Audio could not be loaded&quot;</li>
<li>The <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">&lt;audio&gt;</code> element fires an <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">error</code> event</li>
<li><code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">MediaError.code</code> is <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">4</code> (MEDIA_ERR_SRC_NOT_SUPPORTED)</li>
<li>Backend logs show the file was successfully served (HTTP 200)</li>
<li>The exact same audio plays fine on Chrome/Firefox</li>
</ul>
<h2>The Three-Headed Problem</h2>
<p>What makes this particularly tricky is that there are actually <strong>three distinct issues</strong> that can cause this, and you might be dealing with any combination of them:</p>
<h3>1. Codec Incompatibility</h3>
<p>Safari does not support the <strong>WebM</strong> container format or the <strong>Opus</strong> audio codec. When you use the MediaRecorder API without specifying a MIME type:</p>
<pre><div class="relative my-6 rounded-lg overflow-hidden bg-slate-900 border border-slate-800 group shadow-lg"><div class="flex items-center justify-between px-4 py-2 bg-slate-800/80 border-b border-slate-700/50 backdrop-blur"><button class="
            flex items-center gap-2 text-xs font-semibold px-2 py-1.5 rounded-md transition-all duration-200
            text-slate-400 hover:text-white hover:bg-slate-700/60
          " aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button><div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div></div><span class="text-xs text-slate-500 font-mono tracking-wider uppercase ml-2">javascript</span></div></div><div node="[object Object]" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.5rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem;background-color:transparent"><code style="white-space:pre;font-family:var(--font-mono, monospace);line-height:1.6"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// This creates WebM/Opus on Chrome, but MP4/AAC on Safari</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> mediaRecorder </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">new</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">MediaRecorder</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>stream</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span></span></code></div></div></pre>
<p>If a user records audio on Chrome (WebM) and another user tries to play it on Safari, it will fail.</p>
<p><strong>The Fix:</strong> Always specify a cross-browser compatible format:</p>
<pre><div class="relative my-6 rounded-lg overflow-hidden bg-slate-900 border border-slate-800 group shadow-lg"><div class="flex items-center justify-between px-4 py-2 bg-slate-800/80 border-b border-slate-700/50 backdrop-blur"><button class="
            flex items-center gap-2 text-xs font-semibold px-2 py-1.5 rounded-md transition-all duration-200
            text-slate-400 hover:text-white hover:bg-slate-700/60
          " aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button><div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div></div><span class="text-xs text-slate-500 font-mono tracking-wider uppercase ml-2">javascript</span></div></div><div node="[object Object]" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.5rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem;background-color:transparent"><code style="white-space:pre;font-family:var(--font-mono, monospace);line-height:1.6"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">function</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">getCompatibleMimeType</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span>  </span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> types </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>    </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/mp4&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span>    </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/aac&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span>    </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/webm;codecs=opus&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span>    </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/webm&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>  </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">for</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> type </span><span class="token" style="color:hsl(286, 60%, 67%)">of</span><span> types</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>    </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">if</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token maybe-class-name">MediaRecorder</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">isTypeSupported</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>type</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span>      </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">return</span><span> type</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span><span>  </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span> </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// Let browser decide</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">17</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> mimeType </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">getCompatibleMimeType</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">18</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> mediaRecorder </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">new</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">MediaRecorder</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>stream</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span> mimeType </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span></span></code></div></div></pre>
<p>Safari will prefer <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">audio/mp4</code> (AAC codec), which is universally playable.</p>
<h3>2. Missing or Incorrect Headers</h3>
<p>Safari&#x27;s <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">&lt;audio&gt;</code> element is extremely picky about HTTP headers. If your backend serves audio through an API endpoint (e.g., for authentication or decryption), you MUST include these headers:</p>
<pre><div class="relative my-6 rounded-lg overflow-hidden bg-slate-900 border border-slate-800 group shadow-lg"><div class="flex items-center justify-between px-4 py-2 bg-slate-800/80 border-b border-slate-700/50 backdrop-blur"><button class="
            flex items-center gap-2 text-xs font-semibold px-2 py-1.5 rounded-md transition-all duration-200
            text-slate-400 hover:text-white hover:bg-slate-700/60
          " aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button><div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div></div><span class="text-xs text-slate-500 font-mono tracking-wider uppercase ml-2">python</span></div></div><div node="[object Object]" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.5rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem;background-color:transparent"><code style="white-space:pre;font-family:var(--font-mono, monospace);line-height:1.6"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># Python/FastAPI example</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">from</span><span> fastapi</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>responses </span><span class="token" style="color:hsl(286, 60%, 67%)">import</span><span> Response
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span></span><span class="token decorator annotation" style="color:hsl(220, 14%, 71%)">@app</span><span class="token decorator annotation" style="color:hsl(220, 14%, 71%)">.</span><span class="token decorator annotation" style="color:hsl(220, 14%, 71%)">get</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;/api/audio/{file_id}&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">async</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">def</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">get_audio</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>file_id</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">str</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span>    audio_content </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> load_audio</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>file_id</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> Response</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>        content</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span>audio_content</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>        media_type</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/mp4&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>  </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># Correct MIME type!</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span>        headers</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Content-Length&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">str</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">len</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>audio_content</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>  </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># REQUIRED for Safari</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Accept-Ranges&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;bytes&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>  </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># Enables seeking</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Content-Disposition&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;inline&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>  </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># Not &quot;attachment&quot;!</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">)</span></span></code></div></div></pre>
<p>Critical points:</p>
<ul>
<li><strong>Content-Length is mandatory</strong> - Safari won&#x27;t play audio without it</li>
<li><strong>Don&#x27;t use StreamingResponse</strong> - Safari needs the full content length upfront</li>
<li><strong>Support Range requests</strong> - Safari uses these for seeking</li>
</ul>
<p>For range requests (Safari sends these when seeking):</p>
<pre><div class="relative my-6 rounded-lg overflow-hidden bg-slate-900 border border-slate-800 group shadow-lg"><div class="flex items-center justify-between px-4 py-2 bg-slate-800/80 border-b border-slate-700/50 backdrop-blur"><button class="
            flex items-center gap-2 text-xs font-semibold px-2 py-1.5 rounded-md transition-all duration-200
            text-slate-400 hover:text-white hover:bg-slate-700/60
          " aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button><div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div></div><span class="text-xs text-slate-500 font-mono tracking-wider uppercase ml-2">python</span></div></div><div node="[object Object]" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.5rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem;background-color:transparent"><code style="white-space:pre;font-family:var(--font-mono, monospace);line-height:1.6"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token decorator annotation" style="color:hsl(220, 14%, 71%)">@app</span><span class="token decorator annotation" style="color:hsl(220, 14%, 71%)">.</span><span class="token decorator annotation" style="color:hsl(220, 14%, 71%)">get</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;/api/audio/{file_id}&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">async</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">def</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">get_audio</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>file_id</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">str</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> request</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> Request</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>    audio_content </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> load_audio</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>file_id</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span>    content_length </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">len</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>audio_content</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span>    range_header </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> request</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>headers</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span>get</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;range&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> range_header</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>        </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># Parse &quot;bytes=0-1023&quot; format</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>        start</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> end </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> parse_range_header</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>range_header</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> content_length</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> Response</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span><span>            content</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span>audio_content</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span>start</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>end</span><span class="token" style="color:hsl(207, 82%, 66%)">+</span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span><span>            status_code</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span class="token" style="color:hsl(29, 54%, 61%)">206</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>  </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># Partial Content</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span><span>            media_type</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/mp4&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span><span>            headers</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">17</span><span>                </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Content-Length&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">str</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>end </span><span class="token" style="color:hsl(207, 82%, 66%)">-</span><span> start </span><span class="token" style="color:hsl(207, 82%, 66%)">+</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">18</span><span>                </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Content-Range&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">f&quot;bytes </span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">start</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">-</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">end</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">/</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">{</span><span class="token string-interpolation interpolation">content_length</span><span class="token string-interpolation interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token string-interpolation" style="color:hsl(95, 38%, 62%)">&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">19</span><span>                </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Accept-Ranges&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;bytes&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">20</span><span>            </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">21</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">22</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">23</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># Full content</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">24</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> Response</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">25</span><span>        content</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span>audio_content</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">26</span><span>        media_type</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/mp4&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">27</span><span>        headers</span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">28</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Content-Length&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">str</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>content_length</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">29</span><span>            </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;Accept-Ranges&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;bytes&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">30</span><span>        </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">31</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">)</span></span></code></div></div></pre>
<h3>3. The <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">&lt;audio&gt;</code> Element Just Won&#x27;t Cooperate</h3>
<p>Even with correct codecs and headers, Safari&#x27;s <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">&lt;audio&gt;</code> element can still fail when loading audio from an API endpoint. This is because Safari handles audio loading differently from other browsers.</p>
<p><strong>The Nuclear Option: Blob URLs</strong></p>
<p>The most reliable solution is to bypass the <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">&lt;audio&gt;</code> element&#x27;s built-in loading entirely:</p>
<pre><div class="relative my-6 rounded-lg overflow-hidden bg-slate-900 border border-slate-800 group shadow-lg"><div class="flex items-center justify-between px-4 py-2 bg-slate-800/80 border-b border-slate-700/50 backdrop-blur"><button class="
            flex items-center gap-2 text-xs font-semibold px-2 py-1.5 rounded-md transition-all duration-200
            text-slate-400 hover:text-white hover:bg-slate-700/60
          " aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button><div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div></div><span class="text-xs text-slate-500 font-mono tracking-wider uppercase ml-2">javascript</span></div></div><div node="[object Object]" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.5rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem;background-color:transparent"><code style="white-space:pre;font-family:var(--font-mono, monospace);line-height:1.6"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">async</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">function</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">loadAudioForSafari</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token parameter">audioElement</span><span class="token parameter" style="color:hsl(220, 14%, 71%)">,</span><span class="token parameter"> url</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span>  </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// Detect Safari</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>  </span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> isSafari </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span>    </span><span class="token regex-delimiter" style="color:hsl(95, 38%, 62%)">/</span><span class="token regex-source language-regex" style="color:hsl(95, 38%, 62%)">Safari</span><span class="token regex-delimiter" style="color:hsl(95, 38%, 62%)">/</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">test</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token dom" style="color:hsl(207, 82%, 66%)">navigator</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">userAgent</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&amp;&amp;</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">!</span><span class="token regex-delimiter" style="color:hsl(95, 38%, 62%)">/</span><span class="token regex-source language-regex" style="color:hsl(95, 38%, 62%)">Chrome</span><span class="token regex-delimiter" style="color:hsl(95, 38%, 62%)">/</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">test</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token dom" style="color:hsl(207, 82%, 66%)">navigator</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">userAgent</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span>  </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">if</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>isSafari</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// Fetch the audio as a blob</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> response </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">await</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">fetch</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>url</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>      </span><span class="token literal-property" style="color:hsl(355, 65%, 65%)">credentials</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;include&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// Include auth cookies</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span>    </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">if</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(207, 82%, 66%)">!</span><span>response</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">ok</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span><span>      </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">throw</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">new</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">Error</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token template-string template-punctuation" style="color:hsl(95, 38%, 62%)">`</span><span class="token template-string" style="color:hsl(95, 38%, 62%)">Failed to fetch: </span><span class="token template-string interpolation" style="color:hsl(220, 14%, 71%)">${</span><span class="token template-string interpolation">response</span><span class="token template-string interpolation" style="color:hsl(220, 14%, 71%)">.</span><span class="token template-string interpolation property-access">status</span><span class="token template-string interpolation" style="color:hsl(220, 14%, 71%)">}</span><span class="token template-string template-punctuation" style="color:hsl(95, 38%, 62%)">`</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span><span>    </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> blob </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">await</span><span> response</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">blob</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">17</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> blobUrl </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">URL</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">createObjectURL</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>blob</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">18</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">19</span><span>    audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">src</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> blobUrl</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">20</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">21</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// Store for cleanup</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">22</span><span>    audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">_blobUrl</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> blobUrl</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">23</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span> </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">else</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">24</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// Other browsers work fine with direct URL</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">25</span><span>    audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">src</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> url</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">26</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">27</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">28</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">29</span><span></span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// Clean up when done</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">30</span><span></span><span class="token" style="color:hsl(286, 60%, 67%)">function</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">cleanupAudio</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token parameter">audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">31</span><span>  </span><span class="token control-flow" style="color:hsl(286, 60%, 67%)">if</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">_blobUrl</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">32</span><span>    </span><span class="token" style="color:hsl(29, 54%, 61%)">URL</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">revokeObjectURL</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">_blobUrl</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">33</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">34</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span></span></code></div></div></pre>
<p>This approach:</p>
<ol>
<li>Uses <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">fetch</code> which handles authentication properly</li>
<li>Creates a local Blob URL that Safari can definitely play</li>
<li>Avoids Safari&#x27;s quirky streaming behavior entirely</li>
</ol>
<h2>Detecting the Audio Format</h2>
<p>If you&#x27;re serving encrypted or processed audio files, you might lose the original MIME type. Detect it from the file&#x27;s magic bytes:</p>
<pre><div class="relative my-6 rounded-lg overflow-hidden bg-slate-900 border border-slate-800 group shadow-lg"><div class="flex items-center justify-between px-4 py-2 bg-slate-800/80 border-b border-slate-700/50 backdrop-blur"><button class="
            flex items-center gap-2 text-xs font-semibold px-2 py-1.5 rounded-md transition-all duration-200
            text-slate-400 hover:text-white hover:bg-slate-700/60
          " aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button><div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div></div><span class="text-xs text-slate-500 font-mono tracking-wider uppercase ml-2">python</span></div></div><div node="[object Object]" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.5rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem;background-color:transparent"><code style="white-space:pre;font-family:var(--font-mono, monospace);line-height:1.6"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span class="token" style="color:hsl(286, 60%, 67%)">def</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">detect_audio_type</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>content</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">bytes</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">-</span><span class="token" style="color:hsl(207, 82%, 66%)">&gt;</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">str</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">len</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>content</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">12</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;application/octet-stream&quot;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># WebM: starts with 0x1A 0x45 0xDF 0xA3</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> content</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">4</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">==</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">b&#x27;\x1a\x45\xdf\xa3&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/webm&quot;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># MP4/M4A: has &#x27;ftyp&#x27; at offset 4</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> content</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(29, 54%, 61%)">4</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">8</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">==</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">b&#x27;ftyp&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/mp4&quot;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">13</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># WAV: starts with &#x27;RIFF&#x27; ... &#x27;WAVE&#x27;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">14</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> content</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">4</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">==</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">b&#x27;RIFF&#x27;</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">and</span><span> content</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(29, 54%, 61%)">8</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">12</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">==</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">b&#x27;WAVE&#x27;</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">15</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/wav&quot;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">16</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">17</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic"># MP3: ID3 tag or frame sync</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">18</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">if</span><span> content</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span class="token" style="color:hsl(29, 54%, 61%)">3</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">==</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">b&#x27;ID3&#x27;</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">or</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>content</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(29, 54%, 61%)">0</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">==</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">0xff</span><span> </span><span class="token" style="color:hsl(286, 60%, 67%)">and</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>content</span><span class="token" style="color:hsl(220, 14%, 71%)">[</span><span class="token" style="color:hsl(29, 54%, 61%)">1</span><span class="token" style="color:hsl(220, 14%, 71%)">]</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">&amp;</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">0xe0</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token" style="color:hsl(207, 82%, 66%)">==</span><span> </span><span class="token" style="color:hsl(29, 54%, 61%)">0xe0</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">:</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">19</span><span>        </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;audio/mpeg&quot;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">20</span>
</span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">21</span><span>    </span><span class="token" style="color:hsl(286, 60%, 67%)">return</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;application/octet-stream&quot;</span></span></code></div></div></pre>
<h2>The Complete Solution</h2>
<p>For bulletproof cross-browser audio:</p>
<ol>
<li><strong>Record in compatible format</strong> - Use <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">audio/mp4</code> when available</li>
<li><strong>Serve with correct headers</strong> - Content-Length, Accept-Ranges, proper MIME type</li>
<li><strong>Support Range requests</strong> - Return 206 with Content-Range</li>
<li><strong>Use Blob URLs for Safari</strong> - Fetch â†’ Blob â†’ ObjectURL</li>
</ol>
<h2>Debugging Tips</h2>
<p>When things go wrong, log these from the audio element:</p>
<pre><div class="relative my-6 rounded-lg overflow-hidden bg-slate-900 border border-slate-800 group shadow-lg"><div class="flex items-center justify-between px-4 py-2 bg-slate-800/80 border-b border-slate-700/50 backdrop-blur"><button class="
            flex items-center gap-2 text-xs font-semibold px-2 py-1.5 rounded-md transition-all duration-200
            text-slate-400 hover:text-white hover:bg-slate-700/60
          " aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-3.5 h-3.5" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button><div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div><div class="w-2.5 h-2.5 rounded-full bg-slate-600/50"></div></div><span class="text-xs text-slate-500 font-mono tracking-wider uppercase ml-2">javascript</span></div></div><div node="[object Object]" style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.5rem;margin:0;overflow:auto;border-radius:0.3em;font-size:0.875rem;background-color:transparent"><code style="white-space:pre;font-family:var(--font-mono, monospace);line-height:1.6"><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">1</span><span>audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">addEventListener</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;error&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span> </span><span class="token arrow" style="color:hsl(207, 82%, 66%)">=&gt;</span><span> </span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">2</span><span>  </span><span class="token" style="color:hsl(286, 60%, 67%)">const</span><span> error </span><span class="token" style="color:hsl(207, 82%, 66%)">=</span><span> audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">error</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">3</span><span>  </span><span class="token console" style="color:hsl(29, 54%, 61%)">console</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token method property-access" style="color:hsl(207, 82%, 66%)">log</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span class="token" style="color:hsl(220, 14%, 71%)">{</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">4</span><span>    </span><span class="token literal-property" style="color:hsl(355, 65%, 65%)">errorCode</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> error</span><span class="token" style="color:hsl(207, 82%, 66%)">?.</span><span>code</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">5</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// 1: ABORTED, 2: NETWORK, 3: DECODE, 4: SRC_NOT_SUPPORTED</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">6</span><span>    </span><span class="token literal-property" style="color:hsl(355, 65%, 65%)">readyState</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">readyState</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">7</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// 0: NOTHING, 1: METADATA, 2: CURRENT_DATA, 3: FUTURE_DATA, 4: ENOUGH_DATA</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">8</span><span>    </span><span class="token literal-property" style="color:hsl(355, 65%, 65%)">networkState</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">networkState</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">9</span><span>    </span><span class="token" style="color:hsl(220, 10%, 40%);font-style:italic">// 0: EMPTY, 1: IDLE, 2: LOADING, 3: NO_SOURCE</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">10</span><span>    </span><span class="token literal-property" style="color:hsl(355, 65%, 65%)">currentSrc</span><span class="token" style="color:hsl(207, 82%, 66%)">:</span><span> audioElement</span><span class="token" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">currentSrc</span><span class="token" style="color:hsl(220, 14%, 71%)">,</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">11</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span><span>
</span></span><span><span class="linenumber react-syntax-highlighter-line-number" style="display:inline-block;min-width:3em;padding-right:1em;text-align:right;user-select:none;color:hsl(220, 10%, 40%);font-style:italic">12</span><span></span><span class="token" style="color:hsl(220, 14%, 71%)">}</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span class="token" style="color:hsl(220, 14%, 71%)">;</span></span></code></div></div></pre>
<p>If you see:</p>
<ul>
<li><code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">errorCode: 4</code> + <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">networkState: 3</code> â†’ The audio never loaded (header/CORS issue)</li>
<li><code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">errorCode: 3</code> â†’ Decoding failed (codec issue)</li>
<li><code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">errorCode: 4</code> + <code class="px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-800 dark:text-slate-200 rounded text-sm font-mono" node="[object Object]">readyState: 0</code> â†’ Safari being Safari (use Blob approach)</li>
</ul>
<h2>Conclusion</h2>
<p>Safari audio issues are frustrating because they require solving multiple problems at once. The codec, headers, and loading mechanism all need to work together. The Blob URL approach is the most reliable solution when you control the client code, while proper header support is essential for any media-serving backend.</p>
<p>Remember: always test on actual iOS devices. The iOS Simulator can behave differently from real hardware.</p>
<hr/>
<p><em>Have you encountered other Safari audio quirks? Share your war stories in the comments.</em></p></div></div><!--$--><!--/$--></main><footer class="border-t border-slate-200 dark:border-slate-800 py-6 text-center text-sm text-slate-500 dark:text-slate-400">Â© <!-- -->2025<!-- --> Mohammad Sadat Hossain. All rights reserved.</footer><script src="/_next/static/chunks/c3f9506b72c1348b.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[59919,[\"/_next/static/chunks/58c2b1b1d516231a.js\",\"/_next/static/chunks/c836aafec79742f5.js\"],\"ThemeProvider\"]\n3:I[45678,[\"/_next/static/chunks/58c2b1b1d516231a.js\",\"/_next/static/chunks/c836aafec79742f5.js\"],\"default\"]\n4:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/c81db6e24f0cfdeb.js\"],\"default\"]\n5:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/c81db6e24f0cfdeb.js\"],\"default\"]\n6:I[29306,[\"/_next/static/chunks/58c2b1b1d516231a.js\",\"/_next/static/chunks/c836aafec79742f5.js\",\"/_next/static/chunks/e94577539defbe8e.js\",\"/_next/static/chunks/81df9eb6eb572478.js\"],\"default\"]\n8:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/c81db6e24f0cfdeb.js\"],\"OutletBoundary\"]\n9:\"$Sreact.suspense\"\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/c81db6e24f0cfdeb.js\"],\"ViewportBoundary\"]\nd:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/c81db6e24f0cfdeb.js\"],\"MetadataBoundary\"]\nf:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/1e325bcacc5ab67c.css\",\"style\"]\n:HL[\"/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/chunks/6f04dbb31b3b2afc.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"HvBExidyrcfczWy1wVCOr\",\"c\":[\"\",\"blogs\",\"c3d4e5f6-a7b8-9012-cdef-345678901235\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"blogs\",{\"children\":[[\"uuid\",\"c3d4e5f6-a7b8-9012-cdef-345678901235\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/1e325bcacc5ab67c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/58c2b1b1d516231a.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/c836aafec79742f5.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"scroll-smooth\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"inter_5901b7c6-module__ec5Qua__variable font-sans antialiased min-h-screen flex flex-col\",\"children\":[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex-1 container mx-auto px-4 py-8\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"$L6\",null,{}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"border-t border-slate-200 dark:border-slate-800 py-6 text-center text-sm text-slate-500 dark:text-slate-400\",\"children\":[\"Â© \",2025,\" Mohammad Sadat Hossain. All rights reserved.\"]}]]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/6f04dbb31b3b2afc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/7c7890717b80e2b2.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L8\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@a\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$Lb\",null,{\"children\":\"$@c\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@e\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/c81db6e24f0cfdeb.js\"],\"IconMark\"]\ne:[[\"$\",\"title\",\"0\",{\"children\":\"Mohammad Sadat Hossain | Lecturer, CSE, BUET\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Lecturer at CSE, BUET | AI \u0026 Bioinformatics Researcher | My research interests lie in computational biology, AI for health, and human-computer interaction.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"icon\",\"href\":\"/icon.ico\",\"sizes\":\"32x32\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/logo.png\",\"sizes\":\"1024x1024\",\"type\":\"image/png\"}],[\"$\",\"link\",\"4\",{\"rel\":\"apple-touch-icon\",\"href\":\"/logo.png\"}],[\"$\",\"$L10\",\"5\",{}]]\na:null\n"])</script><script>self.__next_f.push([1,"11:I[22016,[\"/_next/static/chunks/58c2b1b1d516231a.js\",\"/_next/static/chunks/c836aafec79742f5.js\",\"/_next/static/chunks/7c7890717b80e2b2.js\"],\"\"]\n:HL[\"/banners/ios-audio-safari.png\",\"image\"]\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"div\",null,{\"className\":\"max-w-4xl mx-auto space-y-8\",\"children\":[[\"$\",\"$L11\",null,{\"href\":\"/blogs\",\"className\":\"inline-flex items-center gap-2 text-sm text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-50 transition-colors\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":16,\"height\":16,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}],\"Back to Blogs\"]}],[\"$\",\"div\",null,{\"className\":\"relative w-full aspect-video md:aspect-[2/1] rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800 shadow-sm\",\"children\":[\"$\",\"img\",null,{\"src\":\"/banners/ios-audio-safari.png\",\"alt\":\"Why Your Audio Won't Play on iOS Safari (And How to Fix It)\",\"className\":\"w-full h-full object-cover\"}]}],[\"$\",\"header\",null,{\"className\":\"space-y-4 border-b border-slate-200 dark:border-slate-800 pb-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":16,\"height\":16,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-calendar\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1cmpym\",{\"d\":\"M8 2v4\"}],[\"$\",\"path\",\"4m81vk\",{\"d\":\"M16 2v4\"}],[\"$\",\"rect\",\"1hopcy\",{\"width\":\"18\",\"height\":\"18\",\"x\":\"3\",\"y\":\"4\",\"rx\":\"2\"}],[\"$\",\"path\",\"8toen8\",{\"d\":\"M3 10h18\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"December 14, 2025\"}]]}],[\"$\",\"span\",null,{\"className\":\"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs font-medium\",\"children\":\"Tutorial\"}]]}],[\"$\",\"h1\",null,{\"className\":\"text-3xl md:text-4xl font-bold text-slate-900 dark:text-slate-50 leading-tight\",\"children\":\"Why Your Audio Won't Play on iOS Safari (And How to Fix It)\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-2\",\"children\":[[\"$\",\"span\",\"iOS\",{\"className\":\"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":12,\"height\":12,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"iOS\"]}],[\"$\",\"span\",\"Safari\",{\"className\":\"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":12,\"height\":12,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"Safari\"]}],[\"$\",\"span\",\"Audio\",{\"className\":\"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":12,\"height\":12,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],\"$L12\",\"$undefined\"]}],\"Audio\"]}],\"$L13\",\"$L14\",\"$L15\"]}]]}],\"$L16\"]}]\n"])</script><script>self.__next_f.push([1,"17:I[12740,[\"/_next/static/chunks/58c2b1b1d516231a.js\",\"/_next/static/chunks/c836aafec79742f5.js\",\"/_next/static/chunks/7c7890717b80e2b2.js\"],\"default\"]\n12:[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}]\n13:[\"$\",\"span\",\"Web Development\",{\"className\":\"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":12,\"height\":12,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"Web Development\"]}]\n14:[\"$\",\"span\",\"Cross-Browser\",{\"className\":\"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":12,\"height\":12,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"Cross-Browser\"]}]\n15:[\"$\",\"span\",\"Debugging\",{\"className\":\"flex items-center gap-1 text-xs text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":12,\"height\":12,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-tag\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"vktsd0\",{\"d\":\"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z\"}],[\"$\",\"circle\",\"kqv944\",{\"cx\":\"7.5\",\"cy\":\"7.5\",\"r\":\".5\",\"fill\":\"currentColor\"}],\"$undefined\"]}],\"Debugging\"]}]\n18:T1ec0,"])</script><script>self.__next_f.push([1,"If you've ever built a web application that records and plays back audio, you've probably encountered the dreaded scenario: everything works perfectly on Chrome, Firefox, and Androidâ€”but the moment someone opens your app on an iPhone or Mac Safari, the audio simply refuses to play. You see an error, or worse, nothing at all.\n\nAfter hours of debugging a production issue affecting all iOS/Safari users, I want to share what I learned about this surprisingly complex problem.\n\n## The Symptoms\n\nThe issue typically manifests as:\n\n- Audio player shows \"Audio could not be loaded\"\n- The `\u003caudio\u003e` element fires an `error` event\n- `MediaError.code` is `4` (MEDIA_ERR_SRC_NOT_SUPPORTED)\n- Backend logs show the file was successfully served (HTTP 200)\n- The exact same audio plays fine on Chrome/Firefox\n\n## The Three-Headed Problem\n\nWhat makes this particularly tricky is that there are actually **three distinct issues** that can cause this, and you might be dealing with any combination of them:\n\n### 1. Codec Incompatibility\n\nSafari does not support the **WebM** container format or the **Opus** audio codec. When you use the MediaRecorder API without specifying a MIME type:\n\n```javascript\n// This creates WebM/Opus on Chrome, but MP4/AAC on Safari\nconst mediaRecorder = new MediaRecorder(stream);\n```\n\nIf a user records audio on Chrome (WebM) and another user tries to play it on Safari, it will fail.\n\n**The Fix:** Always specify a cross-browser compatible format:\n\n```javascript\nfunction getCompatibleMimeType() {\n  const types = [\n    \"audio/mp4\",\n    \"audio/aac\",\n    \"audio/webm;codecs=opus\",\n    \"audio/webm\",\n  ];\n\n  for (const type of types) {\n    if (MediaRecorder.isTypeSupported(type)) {\n      return type;\n    }\n  }\n  return \"\"; // Let browser decide\n}\n\nconst mimeType = getCompatibleMimeType();\nconst mediaRecorder = new MediaRecorder(stream, { mimeType });\n```\n\nSafari will prefer `audio/mp4` (AAC codec), which is universally playable.\n\n### 2. Missing or Incorrect Headers\n\nSafari's `\u003caudio\u003e` element is extremely picky about HTTP headers. If your backend serves audio through an API endpoint (e.g., for authentication or decryption), you MUST include these headers:\n\n```python\n# Python/FastAPI example\nfrom fastapi.responses import Response\n\n@app.get(\"/api/audio/{file_id}\")\nasync def get_audio(file_id: str):\n    audio_content = load_audio(file_id)\n\n    return Response(\n        content=audio_content,\n        media_type=\"audio/mp4\",  # Correct MIME type!\n        headers={\n            \"Content-Length\": str(len(audio_content)),  # REQUIRED for Safari\n            \"Accept-Ranges\": \"bytes\",  # Enables seeking\n            \"Content-Disposition\": \"inline\",  # Not \"attachment\"!\n        }\n    )\n```\n\nCritical points:\n\n- **Content-Length is mandatory** - Safari won't play audio without it\n- **Don't use StreamingResponse** - Safari needs the full content length upfront\n- **Support Range requests** - Safari uses these for seeking\n\nFor range requests (Safari sends these when seeking):\n\n```python\n@app.get(\"/api/audio/{file_id}\")\nasync def get_audio(file_id: str, request: Request):\n    audio_content = load_audio(file_id)\n    content_length = len(audio_content)\n\n    range_header = request.headers.get(\"range\")\n\n    if range_header:\n        # Parse \"bytes=0-1023\" format\n        start, end = parse_range_header(range_header, content_length)\n\n        return Response(\n            content=audio_content[start:end+1],\n            status_code=206,  # Partial Content\n            media_type=\"audio/mp4\",\n            headers={\n                \"Content-Length\": str(end - start + 1),\n                \"Content-Range\": f\"bytes {start}-{end}/{content_length}\",\n                \"Accept-Ranges\": \"bytes\",\n            }\n        )\n\n    # Full content\n    return Response(\n        content=audio_content,\n        media_type=\"audio/mp4\",\n        headers={\n            \"Content-Length\": str(content_length),\n            \"Accept-Ranges\": \"bytes\",\n        }\n    )\n```\n\n### 3. The `\u003caudio\u003e` Element Just Won't Cooperate\n\nEven with correct codecs and headers, Safari's `\u003caudio\u003e` element can still fail when loading audio from an API endpoint. This is because Safari handles audio loading differently from other browsers.\n\n**The Nuclear Option: Blob URLs**\n\nThe most reliable solution is to bypass the `\u003caudio\u003e` element's built-in loading entirely:\n\n```javascript\nasync function loadAudioForSafari(audioElement, url) {\n  // Detect Safari\n  const isSafari =\n    /Safari/.test(navigator.userAgent) \u0026\u0026 !/Chrome/.test(navigator.userAgent);\n\n  if (isSafari) {\n    // Fetch the audio as a blob\n    const response = await fetch(url, {\n      credentials: \"include\", // Include auth cookies\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch: ${response.status}`);\n    }\n\n    const blob = await response.blob();\n    const blobUrl = URL.createObjectURL(blob);\n\n    audioElement.src = blobUrl;\n\n    // Store for cleanup\n    audioElement._blobUrl = blobUrl;\n  } else {\n    // Other browsers work fine with direct URL\n    audioElement.src = url;\n  }\n}\n\n// Clean up when done\nfunction cleanupAudio(audioElement) {\n  if (audioElement._blobUrl) {\n    URL.revokeObjectURL(audioElement._blobUrl);\n  }\n}\n```\n\nThis approach:\n\n1. Uses `fetch` which handles authentication properly\n2. Creates a local Blob URL that Safari can definitely play\n3. Avoids Safari's quirky streaming behavior entirely\n\n## Detecting the Audio Format\n\nIf you're serving encrypted or processed audio files, you might lose the original MIME type. Detect it from the file's magic bytes:\n\n```python\ndef detect_audio_type(content: bytes) -\u003e str:\n    if len(content) \u003c 12:\n        return \"application/octet-stream\"\n\n    # WebM: starts with 0x1A 0x45 0xDF 0xA3\n    if content[:4] == b'\\x1a\\x45\\xdf\\xa3':\n        return \"audio/webm\"\n\n    # MP4/M4A: has 'ftyp' at offset 4\n    if content[4:8] == b'ftyp':\n        return \"audio/mp4\"\n\n    # WAV: starts with 'RIFF' ... 'WAVE'\n    if content[:4] == b'RIFF' and content[8:12] == b'WAVE':\n        return \"audio/wav\"\n\n    # MP3: ID3 tag or frame sync\n    if content[:3] == b'ID3' or (content[0] == 0xff and (content[1] \u0026 0xe0) == 0xe0):\n        return \"audio/mpeg\"\n\n    return \"application/octet-stream\"\n```\n\n## The Complete Solution\n\nFor bulletproof cross-browser audio:\n\n1. **Record in compatible format** - Use `audio/mp4` when available\n2. **Serve with correct headers** - Content-Length, Accept-Ranges, proper MIME type\n3. **Support Range requests** - Return 206 with Content-Range\n4. **Use Blob URLs for Safari** - Fetch â†’ Blob â†’ ObjectURL\n\n## Debugging Tips\n\nWhen things go wrong, log these from the audio element:\n\n```javascript\naudioElement.addEventListener(\"error\", () =\u003e {\n  const error = audioElement.error;\n  console.log({\n    errorCode: error?.code,\n    // 1: ABORTED, 2: NETWORK, 3: DECODE, 4: SRC_NOT_SUPPORTED\n    readyState: audioElement.readyState,\n    // 0: NOTHING, 1: METADATA, 2: CURRENT_DATA, 3: FUTURE_DATA, 4: ENOUGH_DATA\n    networkState: audioElement.networkState,\n    // 0: EMPTY, 1: IDLE, 2: LOADING, 3: NO_SOURCE\n    currentSrc: audioElement.currentSrc,\n  });\n});\n```\n\nIf you see:\n\n- `errorCode: 4` + `networkState: 3` â†’ The audio never loaded (header/CORS issue)\n- `errorCode: 3` â†’ Decoding failed (codec issue)\n- `errorCode: 4` + `readyState: 0` â†’ Safari being Safari (use Blob approach)\n\n## Conclusion\n\nSafari audio issues are frustrating because they require solving multiple problems at once. The codec, headers, and loading mechanism all need to work together. The Blob URL approach is the most reliable solution when you control the client code, while proper header support is essential for any media-serving backend.\n\nRemember: always test on actual iOS devices. The iOS Simulator can behave differently from real hardware.\n\n---\n\n_Have you encountered other Safari audio quirks? Share your war stories in the comments._\n"])</script><script>self.__next_f.push([1,"16:[\"$\",\"$L17\",null,{\"content\":\"$18\"}]\n"])</script></body></html>